/*
 * JQuery Template Plugin
 * Copyright ï¿½ 2010 Stephan Ahlf
 * http://saquery.com/
 */
(function(){var b=[],g=0,d=[],a=function(j,i){var h=!/\W/.test(j)?b[j]=b[j]||a(document.getElementById(j).innerHTML):new Function("obj","try {var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+j.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');} catch(err) {alert(err);return};");return i?h(i):h},e=function(){return"saq-"+g++},c=function(k,h,j){var i=h.replace(/<script/gi,'<code class="saq_script"').replace(/<\/script/gi,"</code"),l;this.content=$("<div/>").html(i);this.scripts=this.content.find(".saq_script").remove();i=h.replace(/<script[^>]*>[^<>]*<\/script>/ig,"");this.content=a(i,j);l=new Function("saqscript",$(this.scripts[0]).html()+";return this;");this.content=$(this.content);k.html("").append(this.content);this.content=$.proxy(l,this.content)();this.content.each(function(){if($(this).attr("id")){$(this).attr("id",e)}}).find("*[id]").attr("id",e());this.html=h;return this},f=function(i){var h=i[0].tagName;i="<"+h+">"+i.html()+"</"+h+">";return i.replace(/&lt;%/g,"<%").replace(/%&gt;/g,"%>")};$.fn.tmp=function(h){if(h instanceof jQuery){h=f(h)}else{if(h.html instanceof jQuery){h.html=f(h.html)}}var k={html:(typeof(h)=="string"?h:$("<div>Please give me an Html markup String.</div>")),contextData:{},methode:"replace"},i=$.extend(k,h),j=function(m,l,n){var p=new c(m,l,n);p.content.data("tmpData",n)};return $(this).each(function(m,p){var o={cache:d,d:i.contextData,o:$(this)},l;if(i.url){l=o.cache[i.url];if(l){j(o.o,l,o.d)}else{$.ajax({processData:false,async:false,cache:false,type:"GET",dataType:"html",url:i.url,context:o,success:function(n){j(this.o,n,this.d);o.cache[i.url]=n},error:function(q,n,r){$(this).html(n)}})}}else{j(o.o,i.html,i.contextData)}})}})(jQuery);